<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Interpretador</title>
  </head>
  <body>
    <h1>Interpretador</h1>
    <h3>Feito para a aula de Arquiteturas de Computadores 2</h3>

    <h4>Instruções disponíveis:</h4>
    <table border="1">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Valor</th>
                <th>Descrição</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Load</td>
                <td>00</td>
                <td>Carrega o valor salvo em dados na posição "Registro 2" para o Registro 1</td>
            </tr>
            <tr>
                <td>Soma</td>
                <td>01</td>
                <td>Soma o valor em registradores["Registrador 1"] com o de registradores["Registrador 2"] e salva na alu (registradores[0])</td>
            </tr>
            <tr>
                <td>Subtração</td>
                <td>10</td>
                <td>Subtrai o valor em registradores["Registrador 2"] de registradores["Registrador 1"] e salva na alu (registradores[0])</td>
            </tr>
            <tr>
                <td>Save</td>
                <td>11</td>
                <td>Salva o valor em registradores["Registrador 2"] na memória de dados, na posição "Registrador 1"</td>
            </tr>
        </tbody>
    </table>
    <ul>
        <h4>Observações:</h4>
        <li>registradores[0] é a alu, utilizada para salvar temporariamente o resultado das operações</li>
        <li>Os valores de Registrador 1 e 2 devem ser binários</li>
    </ul>

    <h2>Insira o comando a ser executado aqui:</h2>
    <form action="/" method="post">
        <input pattern="[0-1]{2}" type="text" name="instruction" placeholder="Instrução" required title="A instrução deve ter 2 dígitos binários">
        <input pattern="[0-1]{3}" type="text" name="register_1" placeholder="Registro 1" required title="Os registros devem ter 3 dígitos binários">
        <input pattern="[0-1]{3}" type="text" name="register_2" placeholder="Registro 2" required title="Os registros devem ter 3 dígitos binários">
        <button>Executar</button>
    </form>

    <div>
        <h4>Salvar os dados na memória</h4>
        <form action="/" method="post">
            <button name="save">Salvar</button>
        </form>
    </div>

    <h4>Utilize a tabela abaixo para alterar os dados salvos na memória:</h4>
    <div>
        <form action="/" method="post">
            <table border="1">
                <thead>
                    <tr>
                        <th>D0</th>
                        <th>D1</th>
                        <th>D2</th>
                        <th>D3</th>
                        <th>D4</th>
                        <th>D5</th>
                        <th>D6</th>
                        <th>D7</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input pattern="[0-1]{8}" type="text" name="D0" placeholder="D0" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D1" placeholder="D1" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D2" placeholder="D2" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D3" placeholder="D3" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D4" placeholder="D4" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D5" placeholder="D5" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D6" placeholder="D6" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                        <td><input pattern="[0-1]{8}" type="text" name="D7" placeholder="D7" required title="Todos os dados devem estar preenchidos com 8 bits para sobre-escrever a memória"></td>
                    </tr>
                </tbody>
            </table>
            <button name="load">Carregar Dados</button>
        </form>
    </div>

    <h3>Última instrução executada:</h3>
    <p>{{original_instruction['instruction']}} {{original_instruction['register_1']}} {{original_instruction['register_2']}}</p>

    <h2>Valores salvos em dados e registradores:</h2>
    <p>Dados salvos (em decimal):</p>
    <table border="1">
        <thead>
            <tr>
                <th>D0</th>
                <th>D1</th>
                <th>D2</th>
                <th>D3</th>
                <th>D4</th>
                <th>D5</th>
                <th>D6</th>
                <th>D7</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{dados[0]}}</td>
                <td>{{dados[1]}}</td>
                <td>{{dados[2]}}</td>
                <td>{{dados[3]}}</td>
                <td>{{dados[4]}}</td>
                <td>{{dados[5]}}</td>
                <td>{{dados[6]}}</td>
                <td>{{dados[7]}}</td>
            </tr>
        </tbody>
    </table>

    <p>Valor dos registradores (em decimal):</p>
    <table border="1">
        <thead>
            <tr>
                <th>R0</th>
                <th>R1</th>
                <th>R2</th>
                <th>R3</th>
                <th>R4</th>
                <th>R5</th>
                <th>R6</th>
                <th>R7</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{registradores[0]}}</td>
                <td>{{registradores[1]}}</td>
                <td>{{registradores[2]}}</td>
                <td>{{registradores[3]}}</td>
                <td>{{registradores[4]}}</td>
                <td>{{registradores[5]}}</td>
                <td>{{registradores[6]}}</td>
                <td>{{registradores[7]}}</td>
            </tr>
        </tbody>
    </table>

    <p>Feito em Python, utilizando flask para o frontend.</p>

  </body>
</html>
